@page "/identity/permissions/{RoleId:int}"

@using AdMegasoft.Web.Shared.Components.Table
@using AdMegasoft.Web.Shared.Components.Text
@using Application.Features.Permissions.Queries.ManagePermissions

<MegaTitle title="Administrar permisos"></MegaTitle>

<MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true"
         AlwaysShowScrollButtons="true" @bind-ActivePanelIndex="_tabIndex">
    @foreach (var group in _groups)
    {
        <MudTabPanel Text="@group.Name">
            <MegaTable ServerData="@ServerReload" T="GetAllPagedPermissionsResponse"
                   @ref="_table"
                   MultiSelection="true">

                <ToolBar>
                    <MudButton DisableElevation Variant="Variant.Filled" Color="Color.Success"
                           StartIcon="@Icons.Material.Filled.Save" IconColor="Color.Surface">
                        Guardar
                    </MudButton>
                </ToolBar>

                <Header>
                    <MudTh><MudTableSortLabel SortLabel="Name" T="GetAllPagedPermissionsResponse">Permiso</MudTableSortLabel></MudTh>
                    <MudTh><MudTableSortLabel SortLabel="Description" T="GetAllPagedPermissionsResponse">Descripción</MudTableSortLabel></MudTh>
                </Header>

                <RowTemplate>
                    <MudTd DataLabel="Name">@context.Name</MudTd>
                    <MudTd DataLabel="Description">@context.Description</MudTd>
                </RowTemplate>
            </MegaTable>
        </MudTabPanel>
    }
</MudTabs>
